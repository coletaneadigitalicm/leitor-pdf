<div class="pdf-viewer-container" (keydown)="onKeyDown($event)" tabindex="0">
  <!-- Upload Section -->
  <div class="upload-section" *ngIf="!pdfLoaded()">
    <div class="upload-controls">
      <h1>Leitor de PDF</h1>
      
      <!-- URL Input -->
      <div class="url-input-group">
        <input 
          type="text" 
          [(ngModel)]="pdfUrl"
          placeholder="Digite a URL do PDF"
          class="url-input"
          (keyup.enter)="loadPdfFromUrl()">
        <button class="btn btn-primary" (click)="loadPdfFromUrl()">
          Carregar da URL
        </button>
      </div>

      <div class="separator">
        <span>OU</span>
      </div>

      <!-- Drag and Drop Area -->
      <div 
        class="drop-zone"
        [class.dragging]="isDragging()"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)"
        (click)="triggerFileInput()">
        <input 
          #fileInput
          type="file" 
          accept="application/pdf"
          multiple
          (change)="onFileSelected($event)"
          style="display: none;">
        
        <div class="drop-zone-content">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <p class="drop-zone-text">
            <span *ngIf="!isDragging()">Arraste um ou mais arquivos PDF aqui ou clique para selecionar</span>
            <span *ngIf="isDragging()">Solte os arquivos aqui</span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- PDF Viewer -->
  <div class="pdf-content" *ngIf="pdfLoaded()">
    <app-pdf-controls-bar></app-pdf-controls-bar>

    <!-- Document Tabs Carousel (only show if multiple documents) -->
    <app-pdf-document-tabs *ngIf="hasMultipleDocs()"></app-pdf-document-tabs>

    <!-- PDF Canvas Container -->
    <div 
      class="pdf-canvas-container"
      [class.page-forward]="pageTransitionDirection() === 'forward'"
      [class.page-backward]="pageTransitionDirection() === 'backward'"
      [class.swiping]="isSwipingActive()"
      [style.--swipe-offset.px]="swipeOffset()"
      #pdfContainer
      (touchstart)="onTouchStart($event)"
      (touchmove)="onTouchMove($event)"
      (touchend)="onTouchEnd($event)">
    </div>
  </div>

  <!-- Loading Indicator -->
  <div class="loading-overlay" *ngIf="isLoading()">
    <div class="spinner"></div>
    <p>Carregando PDF...</p>
  </div>

  <!-- Error Message -->
  <div class="error-message" *ngIf="errorMessage()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    {{ errorMessage() }}
  </div>

  <!-- Instructions Overlay -->
  <div class="instructions" *ngIf="pdfLoaded() && showInstructions()">
    <p>Use as setas do teclado ou gestos de swipe para navegar</p>
  </div>
</div>
